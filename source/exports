##
## .profile
##   usualy run on login shells, only once per session
##   but os x runs it on every new terminal window
## .bashrc
##   run for every shell, e.g. shelling out of emacs or vi, or su'ing to another user
## https://scriptingosx.com/2017/04/about-bash_profile-and-bashrc-on-macos/
##

# https://github.com/CeleritasCelery/emacs-native-shell-complete
export HISTCONTROL=ignoreboth

# full name of user
export USER_FULLNAME=Torgeir\ Thoresen

# node
export NODE_ENV=development
#export NODE_PATH=/usr/local/lib/jsctags/:$NODE_PATH
# set the default nvm node by hand
export PATH="$HOME/.nvm/versions/node/v16.13.1/bin:$PATH"

# utf-8!
case $(uname) in
  Linux)
    export LANG="en_US.utf-8"
    ;;
  Darwin)
    export LANG="no_NO.UTF-8"
    ;;
esac

# git
export VISUAL="emacsclient --socket-name torgemacs"
export EDITOR="emacsclient --socket-name torgemacs"

# local bin
export PATH=$HOME/bin:$PATH
export PATH=$HOME/.local/bin:$PATH
export PATH=$HOME/.emacs.d/bin:$PATH

# coreutils
#export PATH=/usr/local/opt/coreutils/libexec/gnubin:$PATH

# java
#export JAVA_HOME=`/usr/libexec/java_home -v 9`
#export JAVA_HOME=`/usr/libexec/java_home -v 1.8`

# https://www.deps.co/blog/how-to-upgrade-clojure-projects-to-use-java-9/
# export JAVA_TOOL_OPTIONS='--add-modules "java.xml.bind"' # to only add-modules for java 9
#export BOOT_JVM_OPTIONS="--add-modules \"java.xml.bind\"" # the same as above for boot

# maven, don't use maven regularly
#export MAVEN_OPTS="-Xmx512m"

# custom scala build
#export PATH=$HOME/Code/Scala/kepler/dists/latest/bin:$PATH

# io language
#export DYLD_LIBRARY_PATH=/usr/local/Cellar/io/2011.09.12/lib/

# marks - switched to autojump
#export MARKPATH=$HOME/.marks

# syntax highlighting in less
#export LESS=" -R "
#export LESSOPEN="| /usr/local/bin/src-hilite-lesspipe.sh %s"

# prompt, no longer used after pk10
#export PS1='\n\[$(tput setaf 2)\]`jobs -s | wc -l | sed -e "s/ //g"`:\[$(tput setaf 5)\]\h \[$(tput setaf 4 sgr0)\]\w\[$(tput setaf 3)\]`__git_prompt` \n\[$(tput sgr0)\]$ '

#export DOCKER_HOST=tcp://torgqnap:2376 DOCKER_TLS_VERIFY=1 DOCKER_API_VERSION=1.23

# make gpg from emacs prompt in shell (may need to open emacs from command line)
# linux likes this.
export GPG_TTY=$(tty)

#
# seems this is no longer needed?
# running gpgconf --kill all followed by starting emacs triggers the gpg prompt

case $(uname) in
  Darwin)
    export PATH="/usr/local/sbin:$PATH"
    ;;
esac


case $(uname) in
  Linux)
    # make Native Access.exe work in wine
    export MESA_GL_VERSION_OVERRIDE=4.5

    # fsync
    export WINEFSYNC=1

    # Add RVM to PATH for scripting. Make sure this is the last PATH variable change.
    export PATH="$PATH:$HOME/.rvm/bin"
    ;;
esac

# deno
export DENO_INSTALL="$HOME/.deno"
export PATH="$DENO_INSTALL/bin:$PATH"
export DVM_DIR="$HOME/.dvm"
export PATH="$DVM_DIR/bin:$PATH"

# python virtualenv
export WORKON_HOME="$HOME/.virtualenvs"
export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python3
export VIRTUALENVWRAPPER_VIRTUALENV=/usr/local/bin/virtualenv
# its too slow
#source /usr/local/bin/virtualenvwrapper.sh


# https://github.com/GoogleCloudPlatform/gsutil/issues/576#issuecomment-559613825
export CLOUDSDK_PYTHON=python3